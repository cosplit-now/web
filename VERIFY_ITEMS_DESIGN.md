# Verify Items Page - 設計文檔

## 📋 頁面目的

在用戶上傳收據圖片後，OCR 會自動識別商品和價格。但 OCR 可能會有錯誤，所以需要一個 **Verify Items** 頁面讓用戶檢查和修正 OCR 結果。

---

## 🎯 用戶流程

```
上傳收據 (Create Split)
    ↓
OCR 處理
    ↓
Verify Items ⭐ (此頁面)
    ↓
Assign Items
    ↓
Summary
```

---

## ✨ 核心功能

### 1. **顯示 OCR 識別結果**
- 左側：原始收據圖片（可縮放、標記）
- 右側：識別出的商品列表

### 2. **商品項目編輯**
- ✏️ 編輯商品名稱
- 💰 修改價格
- 🔢 調整數量
- ➕ 手動添加遺漏的商品
- 🗑️ 刪除錯誤識別的項目

### 3. **稅項處理**
- 自動識別總稅額
- 可以選擇將稅分配給所有商品或特定商品
- 手動調整稅額

### 4. **智能驗證**
- ⚠️ 總額不匹配時顯示警告
- 檢查是否有負數價格
- 檢查是否有重複項目

---

## 🎨 頁面布局

### 桌面版 (Desktop)

```
┌─────────────────────────────────────────────────────┐
│  Header: Verify Receipt Items                      │
├──────────────────┬──────────────────────────────────┤
│                  │  ✓ Verification Status          │
│  Receipt Image   │  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│  (Zoomable)      │                                  │
│                  │  📝 Items List (Editable)        │
│  🔍 Zoom In/Out  │  ┌────────────────────────────┐ │
│  📌 Highlight    │  │ ☐ Milk        $4.99  [✏️] │ │
│                  │  │ ☐ Bread       $3.49  [✏️] │ │
│                  │  │ ☐ Eggs (12)   $5.99  [✏️] │ │
│                  │  └────────────────────────────┘ │
│                  │                                  │
│                  │  💰 Summary                      │
│                  │  Subtotal:  $45.50               │
│                  │  Tax:       $3.18 [Edit]         │
│                  │  Total:     $48.68 ✓             │
│                  │                                  │
│                  │  [+ Add Item]  [Continue →]     │
└──────────────────┴──────────────────────────────────┘
```

### 手機版 (Mobile)

垂直堆疊：
1. 收據圖片（可折疊）
2. 驗證狀態
3. 商品列表
4. 總額摘要
5. 操作按鈕

---

## 🎯 交互設計

### 左側：收據圖片
- **縮放控制**：滾輪縮放 / 雙擊放大
- **高亮標記**：點擊右側商品時，圖片上對應區域高亮
- **OCR 置信度**：低置信度的項目用黃色框標記

### 右側：商品列表

#### 每個商品卡片包含：
```vue
┌─────────────────────────────────────────┐
│ ☐  [✏️ Edit Mode] / [👁️ View Mode]     │
│                                         │
│  商品名稱: Organic Milk (1L)            │
│  價格: $4.99         數量: 1            │
│  [Has Tax ☑️]  Tax: $0.35              │
│                                         │
│  Confidence: ████░░░░ 78%              │
│  [Delete Item]                         │
└─────────────────────────────────────────┘
```

#### 編輯模式
- 點擊 ✏️ 進入編輯
- Inline 編輯（不需要彈窗）
- 自動保存
- ESC 取消編輯

---

## 🎨 視覺設計特色

### 置信度指示
```
高置信度 (>90%)  : 綠色邊框  ✓
中置信度 (70-90%): 黃色邊框  ⚠️
低置信度 (<70%)  : 紅色邊框  ⚠️ 需要檢查
```

### 狀態徽章
- ✅ **已驗證**: 用戶確認過的項目（綠色）
- ⚠️ **需檢查**: 低置信度或異常值（黃色）
- ❌ **錯誤**: 用戶標記為錯誤（紅色）

### 總額驗證
```
總額匹配  : ✓ 綠色勾選
總額不匹配: ⚠️ 黃色警告 + 差額顯示
```

---

## 🔧 功能細節

### 1. 添加新商品
```
點擊 [+ Add Item]
    ↓
顯示快速表單 (Inline)
    ↓
輸入: 名稱、價格、數量、是否含稅
    ↓
自動添加到列表
```

### 2. 稅項分配模式
- **均攤模式**: 將總稅額平均分配到所有商品
- **選擇性**: 只對勾選的商品分配稅額
- **手動**: 為每個商品單獨設置稅額

### 3. 快捷鍵
- `E`: 編輯選中的項目
- `Delete`: 刪除選中的項目
- `N`: 添加新項目
- `Space`: 切換勾選狀態
- `Ctrl+S`: 繼續到下一步

---

## 📱 響應式設計

### 桌面 (>1024px)
- 左右分欄布局
- 圖片佔 40%，列表佔 60%

### 平板 (768-1024px)
- 上下堆疊
- 圖片可折疊

### 手機 (<768px)
- 全寬度堆疊
- 圖片默認折疊
- 點擊展開全屏查看

---

## 🎯 成功標準

用戶可以在此頁面完成：
✅ 快速瀏覽所有識別的商品
✅ 輕鬆修正錯誤
✅ 添加遺漏的商品
✅ 確認總額正確
✅ 流暢地進入下一步（Assign Items）

**平均完成時間目標**: < 2 分鐘

---

## 🎨 設計風格

- 沿用奶茶色系
- 扁平設計，無漸層
- 大量使用卡片和留白
- 柔和的過渡動畫
- 清晰的視覺層級

---

## 🔄 與其他頁面的連接

```
← Back to Upload
→ Continue to Assign Items (disabled if total mismatch)
```
